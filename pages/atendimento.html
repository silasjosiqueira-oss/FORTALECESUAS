<!-- Versão limpa e corrigida do HTML fornecido. CSS inline removido, estrutura corrigida. Pronta para uso. -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ATENDIMENTO</title>

  <!-- Fontawesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- PDF libs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>

  <!-- CSS externos do projeto -->
  <link rel="stylesheet" href="/css/base/variables.css" />
  <link rel="stylesheet" href="/css/base/reset.css" />
  <link rel="stylesheet" href="/css/base/typography.css" />
  <link rel="stylesheet" href="/css/layout/sidebar.css" />
  <link rel="stylesheet" href="/css/layout/header.css" />
  <link rel="stylesheet" href="/css/layout/grid.css" />
  <link rel="stylesheet" href="/css/layout/responsive.css" />
  <link rel="stylesheet" href="/css/components/buttons.css" />
  <link rel="stylesheet" href="/css/components/cards.css" />
  <link rel="stylesheet" href="/css/components/forms.css" />
  <link rel="stylesheet" href="/css/components/modal.css" />
  <link rel="stylesheet" href="/css/main.css" />
  <link rel="stylesheet" href="/css/pages/atendimento.css" />

  <meta name="api-base" content="/api" />
  <meta name="auth-scheme" content="Bearer" />
</head>
<body>
<div class="app-container">

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar__header">
      <div class="sidebar__logo">FS</div>
      <h1 class="sidebar__title">FORTALECE SUAS</h1>
    </div>
    <nav class="sidebar__nav">
      <ul>
        <li><a href="index.html"><i class="fas fa-tachometer-alt"></i><span>Inicio</span></a></li>
        <li><a href="atendimento.html" class="active"><i class="fas fa-users"></i><span>Atendimentos</span><span class="badge" id="badge-atendimentos"></span></a></li>
        <li><a href="beneficios.html"><i class="fas fa-hand-holding-heart"></i><span>Benefícios</span></a></li>
        <li><a href="agenda.html"><i class="fas fa-calendar-alt"></i><span>Agenda</span></a></li>
        <li><a href="atividades.html"><i class="fas fa-users-cog"></i><span>Grupos/Atividades</span></a></li>
        <li><a href="programas.html"><i class="fas fa-clipboard-list"></i><span>Programas</span></a></li>
        <li><a href="relatorios.html"><i class="fas fa-file-alt"></i><span>Relatórios</span></a></li>
        <li><a href="estatisticas.html"><i class="fas fa-chart-bar"></i><span>Estatísticas</span></a></li>
        <li><a href="cadastros.html"><i class="fas fa-database"></i><span>Cadastros</span></a></li>
        <li><a href="estoque.html"><i class="fas fa-boxes"></i><span>Estoque</span></a></li>
        <li><a href="ferramentas.html"><i class="fas fa-tools"></i><span>Ferramentas</span></a></li>
        <li><a href="configuracoes.html"><i class="fas fa-cogs"></i><span>Configurações</span></a></li>
        <li><a href="suporte.html"><i class="fas fa-life-ring"></i><span>Suporte</span></a></li>
        <li><a href="#" onclick="fazerLogout(); return false;"><i class="fas fa-sign-out-alt"></i><span>Sair</span></a></li>
      </ul>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content">

    <!-- Header -->
    <header class="main-header">
      <div class="header-title">
        <h2>Painel de Atendimentos</h2>
      </div>
      <div class="header-actions">
        <button class="btn btn--primary" onclick="abrirNovoAtendimento()">
          <i class="fas fa-plus"></i> Novo Atendimento
        </button>
      </div>
    </header>

    <!-- Navegação Tabs -->
    <div class="tab-navigation">
      <button class="tab-button active" onclick="showTab('recepcao')"><i class="fas fa-users"></i> Recepção</button>
      <button class="tab-button" onclick="showTab('atendimentos-cadastrados')"><i class="fas fa-list"></i> Atendimentos Cadastrados</button>
      <button class="tab-button" onclick="showTab('demandas-rede')"><i class="fas fa-network-wired"></i> Demandas Rede de Proteção</button>
      <button class="tab-button" onclick="showTab('informacoes-remotas')"><i class="fas fa-phone-alt"></i> Informações Remotas</button>
      <button class="tab-button" onclick="showTab('reuniao-estudo-caso')"><i class="fas fa-comments"></i> Reunião/Estudo de Caso</button>
      <button class="tab-button" onclick="showTab('visitas')"><i class="fas fa-home"></i> Visitas Domiciliares</button>
      <button class="tab-button" onclick="showTab('encaminhamentos')"><i class="fas fa-directions"></i> Encaminhamentos</button>
      <button class="tab-button" onclick="showTab('agenda')"><i class="fas fa-calendar"></i> Agenda</button>
    </div>

    <!-- TAB: RECEPÇÃO -->
    <div id="recepcao" class="tab-content active">
      <div class="card">
        <div class="card-header">
          <h3 class="card-title"><i class="fas fa-hourglass-half"></i> Fila de Espera</h3>
          <button class="btn btn--secondary btn-sm" onclick="carregarAtendimentosAguardando()"><i class="fas fa-sync"></i> Atualizar</button>
        </div>

        <div class="table-responsive">
          <table class="table" id="recepcao-table">
            <thead>
              <tr>
                <th>Registro</th>
                <th>Nome</th>
                <th>CPF</th>
                <th>Tipo</th>
                <th>Data/Hora</th>
                <th style="width:120px;">Ações</th>
              </tr>
            </thead>
            <tbody>
              <tr><td colspan="6" style="text-align:center;padding:2rem;">Carregando...</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- TAB: ATENDIMENTOS CADASTRADOS -->
    <div id="atendimentos-cadastrados" class="tab-content">
      <div class="card">
        <div class="card-header">
          <h3 class="card-title"><i class="fas fa-clipboard-list"></i> Todos os Atendimentos</h3>
          <div class="form-actions">
            <input type="text" id="busca-atendimento" class="form-control" placeholder="Buscar por nome, CPF ou registro..." style="width:300px;" onkeyup="buscarAtendimentos()">
            <button class="btn btn--secondary btn-sm" onclick="limparBusca()"><i class="fas fa-times"></i> Limpar</button>
            <button class="btn btn--info btn-sm" onclick="filtrosAvancados()"><i class="fas fa-filter"></i> Filtros</button>
            <button class="btn btn--secondary btn-sm" onclick="abrirModalImpressao()"><i class="fas fa-print"></i> Imprimir</button>
            <button class="btn btn--success btn-sm" onclick="abrirModalExportarPDF()"><i class="fas fa-file-pdf"></i> Exportar PDF</button>
          </div>
        </div>

        <div class="record-count">Carregando...</div>

        <div class="table-responsive">
          <table class="table" id="atendimentos-table">
            <thead>
              <tr>
                <th>Registro</th>
                <th>Nome</th>
                <th>CPF</th>
                <th>Tipo</th>
                <th>Status</th>
                <th>Técnico</th>
                <th>Data/Hora</th>
                <th style="width:120px;">Ações</th>
              </tr>
            </thead>
            <tbody>
              <tr><td colspan="8" style="text-align:center;padding:2rem;">Carregando...</td></tr>
            </tbody>
          </table>
        </div>

        <div class="pagination"></div>
      </div>
    </div>

    <!-- TAB: DEMANDAS REDE -->
    <div id="demandas-rede" class="tab-content">
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">Demandas Rede de Proteção</h3>
          <a href="demanda-rede-protecao.html" class="btn btn--primary"><i class="fas fa-shield-alt"></i> Nova Demanda Rede Proteção</a>
        </div>
        <div class="alert alert-info"><i class="fas fa-info-circle"></i> Registre aqui as demandas recebidas de órgãos da rede de proteção social.</div>
      </div>
    </div>

    <!-- TAB: INFORMAÇÕES REMOTAS -->
    <div id="informacoes-remotas" class="tab-content">
      <div class="card">
        <div class="card-header">
          <a href="informacao-remota.html" class="btn btn--primary"><i class="fas fa-phone-alt"></i> Nova Informação Remota</a>
        </div>
        <div class="alert alert-info"><i class="fas fa-info-circle"></i> Registre contatos realizados remotamente (telefone, WhatsApp, e-mail).</div>
      </div>
    </div>

    <!-- TAB: REUNIÃO / ESTUDO DE CASO -->
    <div id="reuniao-estudo-caso" class="tab-content">
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">Reunião e Estudo de Caso</h3>
          <button class="btn btn--primary btn-sm"><i class="fas fa-plus"></i> Nova Reunião</button>
        </div>
        <div class="alert alert-info"><i class="fas fa-info-circle"></i> Agende e documente reuniões de equipe e estudos de caso.</div>
      </div>
    </div>

    <!-- TAB: VISITAS DOMICILIARES -->
    <div id="visitas" class="tab-content">
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">Visitas Domiciliares</h3>
          <button class="btn btn--primary btn-sm"><i class="fas fa-plus"></i> Nova Visita</button>
        </div>
        <div class="alert alert-info"><i class="fas fa-info-circle"></i> Registre e acompanhe as visitas domiciliares realizadas.</div>
      </div>
    </div>

    <!-- TAB: ENCAMINHAMENTOS -->
    <div id="encaminhamentos" class="tab-content">
      <div class="card">
        <div class="card-header"><h3 class="card-title">Encaminhamentos</h3> <button class="btn btn--primary btn-sm"><i class="fas fa-plus"></i> Novo Encaminhamento</button></div>
        <div class="alert alert-info"><i class="fas fa-info-circle"></i> Registre encaminhamentos para serviços da rede.</div>
      </div>
    </div>

    <!-- TAB: AGENDA -->
    <div id="agenda" class="tab-content">

      <div class="sub-tabs">
        <button class="sub-tab-button active" onclick="showSubTab('agenda-profissional')">Agenda Profissional</button>
        <button class="sub-tab-button" onclick="showSubTab('agenda-sala')">Agenda de Salas</button>
        <button class="sub-tab-button" onclick="showSubTab('agenda-usuario')">Agenda de Usuários</button>
      </div>

      <div id="agenda-profissional" class="sub-tab-content active">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Agenda Profissional</h3>
            <div class="form-actions">
              <select class="form-control" onchange="updateProfissionalInfo(this.value)" style="width:200px;">
                <option value="">Selecione o profissional</option>
                <option value="maria">Maria Silva</option>
                <option value="joao">João Santos</option>
                <option value="ana">Ana Costa</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <div id="agenda-sala" class="sub-tab-content">
        <div class="card">
          <div class="card-header"><h3 class="card-title">Agenda de Salas</h3>
            <select class="form-control" style="width:200px;">
              <option value="">Selecione a unidade</option>
              <option value="cras-centro">CRAS Centro</option>
              <option value="cras-vila-nova">CRAS Vila Nova</option>
              <option value="creas">CREAS</option>
              <option value="secretaria">Secretaria</option>
            </select>
          </div>
        </div>
      </div>

      <div id="agenda-usuario" class="sub-tab-content">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Agenda de Usuários</h3>
            <button class="btn btn--primary btn-sm" onclick="openModal('modalAgendamento')"><i class="fas fa-calendar-plus"></i> Novo Agendamento</button>
          </div>
        </div>
      </div>

    </div><!-- fim TAB agenda -->

  </main>
</div>

<script src="/src/js/atendimento.app.js"></script>
</body>
</html>
