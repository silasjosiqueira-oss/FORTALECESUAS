<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estatísticas - Sistema de Assistência Social</title>

    <script>
        (function() {
            const savedTheme = localStorage.getItem('app-theme');
            if (savedTheme && savedTheme !== 'light') {
                document.documentElement.setAttribute('data-theme', savedTheme);
            }
        })();
    </script>

    <!-- CSS Structure -->
    <link rel="stylesheet" href="../css/base/reset.css">
    <link rel="stylesheet" href="../css/base/variables.css">
    <link rel="stylesheet" href="../css/base/typography.css">
    <link rel="stylesheet" href="../css/layout/sidebar.css">
    <link rel="stylesheet" href="../css/layout/header.css">
    <link rel="stylesheet" href="../css/layout/grid.css">
    <link rel="stylesheet" href="../css/layout/responsive.css">
    <link rel="stylesheet" href="../css/components/buttons.css">
    <link rel="stylesheet" href="../css/components/cards.css">
    <link rel="stylesheet" href="../css/components/forms.css">
    <link rel="stylesheet" href="../css/components/modal.css">
    <link rel="stylesheet" href="../css/main.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* Estatísticas específicas - versão limpa */
        .stats-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .stats-title {
            font-size: 1.8rem;
            color: var(--theme-text-primary);
            margin-bottom: 0.5rem;
        }

        .stats-subtitle {
            color: var(--theme-text-secondary);
            font-size: 1rem;
        }

        .stats-filters {
            background: var(--theme-surface);
            border: 1px solid var(--theme-surface-border);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .filter-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1rem;
        }

        .stats-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--theme-surface);
            border: 1px solid var(--theme-surface-border);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--theme-shadow-lg);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            background: var(--theme-primary);
            color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin: 0 auto 1rem;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--theme-primary);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--theme-text-secondary);
            font-size: 0.9rem;
        }

        .charts-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .chart-container {
            background: var(--theme-surface);
            border: 1px solid var(--theme-surface-border);
            border-radius: 8px;
            padding: 1.5rem;
            height: 300px;
        }

        .chart-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--theme-text-primary);
            margin-bottom: 1rem;
            text-align: center;
        }

        .stats-table-section {
            background: var(--theme-surface);
            border: 1px solid var(--theme-surface-border);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            overflow-x: auto;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .table-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--theme-text-primary);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--theme-surface-border);
        }

        th {
            background-color: var(--theme-surface-hover);
            font-weight: 600;
            color: var(--theme-text-primary);
        }

        tr:hover {
            background-color: var(--theme-surface-hover);
        }

        .export-options {
            display: flex;
            gap: 0.5rem;
            justify-content: flex-end;
            margin-top: 1rem;
        }

        @media (max-width: 768px) {
            .charts-section {
                grid-template-columns: 1fr;
            }

            .chart-container {
                height: 250px;
            }

            .filter-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar__header">
                <div class="sidebar__logo">AS</div>
                <h1 class="sidebar__title">Assistência Social</h1>
            </div>

            <nav class="sidebar__nav">
                <ul>
                    <li>
                        <a href='/pages/'>
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Inicio</span>
                        </a>
                    </li>
                    <li>
                        <a href='/pages/atendimento.html'>
                            <i class="fas fa-users"></i>
                            <span>Atendimentos</span>
                            <span class="badge">12</span>
                        </a>
                    </li>
                    <li>
                        <a href='/pages/beneficios.html'>
                            <i class="fas fa-hand-holding-heart"></i>
                            <span>Benefícios</span>
                        </a>
                    </li>
                    <li>
                        <a href='/pages/agenda.html'>
                            <i class="fas fa-calendar-alt"></i>
                            <span>Agenda</span>
                        </a>
                    </li>
                    <li>
                        <a href='/pages/atividades.html'>
                            <i class="fas fa-users-cog"></i>
                            <span>Grupos/Atividades</span>
                        </a>
                    </li>
                    <li>
                        <a href='/pages/programas.html'>
                            <i class="fas fa-clipboard-list"></i>
                            <span>Programas</span>
                        </a>
                    </li>
                    <li>
                        <a href='/pages/relatorios.html'>
                            <i class="fas fa-file-alt"></i>
                            <span>Relatórios</span>
                        </a>
                    </li>
                    <li>
                        <a class='active' href='/pages/estatisticas.html'>
                            <i class="fas fa-chart-bar"></i>
                            <span>Estatísticas</span>
                        </a>
                    </li>
                    <li>
                        <a href='/pages/cadastros.html'>
                            <i class="fas fa-database"></i>
                            <span>Cadastros</span>
                        </a>
                    </li>
                    <li>
                        <a href='/pages/estoque.html'>
                            <i class="fas fa-boxes"></i>
                            <span>Estoque</span>
                        </a>
                    </li>
                    <li>
                        <a href="/pages/ferramentas.html">
                            <i class="fas fa-tools"></i>
                            <span>Ferramentas</span>
                        </a>
                    </li>
                    <li>
                        <a href="/pages/configuracoes.html">
                            <i class="fas fa-cogs"></i>
                            <span>Configurações</span>
                        </a>
                    </li>
                    <li>
                        <a href="/pages/suporte.html">
                            <i class="fas fa-life-ring"></i>
                            <span>Suporte</span>
                        </a>
                    </li>
                    <li>
                        <a href='/pages/login.html'>
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Logoff</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <div class="header-title">
                    <h2>Estatísticas - Sistema de Assistência Social</h2>
                    <p class="header-subtitle">Visualize dados e relatórios estatísticos</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn--icon theme-toggle-btn" id="theme-toggle" title="Alternar tema">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="btn btn--icon" title="Perfil">
                        <i class="fas fa-user"></i>
                    </button>
                </div>
            </header>

            <div class="content-wrapper">
                <!-- Filtros -->
                <div class="stats-filters">
                    <h3>Filtros de Estatísticas</h3>
                    <div class="filter-row">
                        <div class="form-group">
                            <label for="tipo-estatistica">Tipo de Estatística</label>
                            <select id="tipo-estatistica" class="form-control">
                                <option value="atendimentos">Atendimentos</option>
                                <option value="encaminhamentos">Encaminhamentos</option>
                                <option value="beneficios">Benefícios</option>
                                <option value="programas">Programas Sociais</option>
                                <option value="atividades">Atividades Coletivas</option>
                                <option value="acolhimentos">Acolhimentos</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="periodo">Período</label>
                            <select id="periodo" class="form-control">
                                <option value="hoje">Hoje</option>
                                <option value="semana">Esta Semana</option>
                                <option value="mes" selected>Este Mês</option>
                                <option value="trimestre">Este Trimestre</option>
                                <option value="semestre">Este Semestre</option>
                                <option value="ano">Este Ano</option>
                                <option value="personalizado">Personalizado</option>
                            </select>
                        </div>
                        <div class="form-group" id="data-inicio-container" style="display: none;">
                            <label for="data-inicio">Data Início</label>
                            <input type="date" id="data-inicio" class="form-control">
                        </div>
                        <div class="form-group" id="data-fim-container" style="display: none;">
                            <label for="data-fim">Data Fim</label>
                            <input type="date" id="data-fim" class="form-control">
                        </div>
                    </div>
                    <div class="filter-row">
                        <div class="form-group">
                            <label for="localidade">Localidade</label>
                            <select id="localidade" class="form-control">
                                <option value="todas">Todas</option>
                                <option value="cras1">CRAS Centro</option>
                                <option value="cras2">CRAS Bairro</option>
                                <option value="creas">CREAS</option>
                                <option value="secretaria">Secretaria</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="faixa-etaria">Faixa Etária</label>
                            <select id="faixa-etaria" class="form-control">
                                <option value="todas">Todas</option>
                                <option value="criancas">Crianças (0-12)</option>
                                <option value="adolescentes">Adolescentes (13-17)</option>
                                <option value="jovens">Jovens (18-29)</option>
                                <option value="adultos">Adultos (30-59)</option>
                                <option value="idosos">Idosos (60+)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="genero">Gênero</label>
                            <select id="genero" class="form-control">
                                <option value="todos">Todos</option>
                                <option value="masculino">Masculino</option>
                                <option value="feminino">Feminino</option>
                                <option value="outros">Outros</option>
                            </select>
                        </div>
                    </div>
                    <div class="filter-actions">
                        <button class="btn btn--secondary" id="limpar-filtros">
                            <i class="fas fa-eraser"></i> Limpar Filtros
                        </button>
                        <button class="btn btn--primary" id="aplicar-filtros">
                            <i class="fas fa-filter"></i> Aplicar Filtros
                        </button>
                    </div>
                </div>

                <!-- Visão Geral -->
                <div class="stats-overview">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-value" id="total-atendimentos">1,247</div>
                        <div class="stat-label">Total de Atendimentos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-hand-holding-heart"></i>
                        </div>
                        <div class="stat-value" id="beneficios-ativos">342</div>
                        <div class="stat-label">Benefícios Ativos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <div class="stat-value" id="familias-cadastradas">589</div>
                        <div class="stat-label">Famílias Cadastradas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-value" id="atividades-coletivas">67</div>
                        <div class="stat-label">Atividades Coletivas</div>
                    </div>
                </div>

                <!-- Gráficos -->
                <div class="charts-section">
                    <div class="chart-container">
                        <div class="chart-title">Atendimentos por Tipo</div>
                        <canvas id="chartAtendimentosTipo"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="chart-title">Benefícios por Programa</div>
                        <canvas id="chartBeneficiosPrograma"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="chart-title">Atendimentos por Faixa Etária</div>
                        <canvas id="chartFaixaEtaria"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="chart-title">Atendimentos por Mês</div>
                        <canvas id="chartAtendimentosMes"></canvas>
                    </div>
                </div>

                <!-- Tabela de Dados -->
                <div class="stats-table-section">
                    <div class="table-header">
                        <h3 class="table-title">Dados Detalhados</h3>
                        <div class="export-options">
                            <button class="btn btn--secondary btn--small" id="exportar-csv">
                                <i class="fas fa-file-csv"></i> CSV
                            </button>
                            <button class="btn btn--secondary btn--small" id="exportar-pdf">
                                <i class="fas fa-file-pdf"></i> PDF
                            </button>
                            <button class="btn btn--secondary btn--small" id="imprimir">
                                <i class="fas fa-print"></i> Imprimir
                            </button>
                        </div>
                    </div>
                    <table id="tabela-dados">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome</th>
                                <th>Tipo</th>
                                <th>Data</th>
                                <th>Localidade</th>
                                <th>Idade</th>
                                <th>Gênero</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Dados serão populados via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Notifications Container -->
    <div id="notifications-container" style="position: fixed; top: 20px; right: 20px; z-index: 10000;"></div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="/src/js/estatisticas.app.js" defer></script>




</body>
</html>
